<!DOCTYPE html>
<html>
<title>RMN Store</title>
    <Head>
            <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
           <script src="file1.js"></script>

        <script>
           var myObj, x;
myObj = [
{Name :"தனியா  100GM" , Price :25.00},
{Name :"மக்கா சோளம்  100GM" , Price :32.00},
{Name :"சீரகம்  100GM" , Price :12.00},
{Name :"சுக்கு  100GM" , Price :68.00},
{Name :"கன்டந்திப்பிலி  100GM" , Price :41.00},
{Name :"சுக்கு  100GM" , Price :3.50},
{Name :"கிஸ்மிஸ்  100GM" , Price :89.00},
{Name :"பெருஞ்சீரகம்  100GM" , Price :25.00},
{Name :"வெந்தயம்  100GM" , Price :63.00},
{Name :"கொண்டை கடலை  100GM" , Price :45.50},
{Name :"வெள்ளைப் பூண்டு  100GM" , Price :25.00},
{Name :"நல்லெண்ணெய்  100GM" , Price :32.00},
{Name :"இஞ்சி  100GM" , Price :12.00},
{Name :"கடலை எண்ணெய்  100GM" , Price :68.00},
{Name :"பச்சை மிளகாய்  100GM" , Price :41.00},
{Name :"பயத்தம் பருப்பு  100GM" , Price :89.00},
{Name :"பச்சைப்பயறு  100GM" , Price :25.00},
{Name :"பாசி பருப்பு  100GM" , Price :63.00},
{Name :"ொய்யரிசி  100GM" , Price :45.50},
{Name :"கொள்ளு  100GM" , Price :25.00},
{Name :"சாம்பிராணி  100GM" , Price :32.00},
{Name :"வெல்லம்  100GM" , Price :12.00},
{Name :"மக்காச்சோளம்  100GM" , Price :68.00},
{Name :"சிறுதானியங்கள்  100GM" , Price :41.00},
{Name :"கடுகு  100GM" , Price :3.50},
{Name :"வேப்ப எண்ணெய்  100GM" , Price :89.00},
{Name :"கருஞ்சீரகம்  100GM" , Price :25.00},
{Name :"பனங்கருப்பட்டி  100GM" , Price :63.00},
{Name :"பாமாயில்  100GM" , Price :45.50},
{Name :"வேற்கடலை  100GM" , Price :25.00},
{Name :"பட்டாணி  100GM" , Price :32.00},
{Name :"மிளகு  100GM" , Price :12.00},
{Name :"ஊறுகாய்  100GM" , Price :68.00},
{Name :"கசகசா  100GM" , Price :41.00},
{Name :"கேழ்வரகு  100GM" , Price :3.50},
{Name :"உலர்திராட்சை  100GM" , Price :89.00},
{Name :"வரமிளகாய்/சிவப்பு மிளகாய்  100GM" , Price :25.00},
{Name :"துவரை  100GM" , Price :63.00},
{Name :"அரிசி  100GM" , Price :45.50},
{Name :"கோதுமை நெய்  100GM" , Price :25.00},
{Name :"பன்னீர்  100GM" , Price :32.00},
{Name :"ஜவ்வரிசி  100GM" , Price :12.00},
{Name :"உப்பு  100GM" , Price :68.00},
{Name :"நல்லெண்ணெய்  100GM" , Price :41.00},
{Name :"ரவை  100GM" , Price :3.50},
{Name :"சர்க்கரை  100GM" , Price :89.00},
{Name :"கற்கண்டு  100GM" , Price :25.00},
{Name :"தூள் உப்பு  100GM" , Price :63.00},
{Name :"புளி  100GM" , Price :45.50},
{Name :"மஞ்சள்  100GM" , Price :25.00},
{Name :"சேமியா  100GM" , Price :32.00},
{Name :"கோதுமை  100GM" , Price :12.00},
{Name :"துவரம் பருப்பு  100GM" , Price :68.00}
];
        
   
        
        
        </script>
        
        <script>
            $(document).ready(function () {
                BuildTable();
                var isMobile = {
                    Android: function () {
                        return navigator.userAgent.match(/Android/i);
                    },
                    BlackBerry: function () {
                        return navigator.userAgent.match(/BlackBerry/i);
                    },
                    iOS: function () {
                        return navigator.userAgent.match(/iPhone|iPad|iPod/i);
                    },
                    Opera: function () {
                        return navigator.userAgent.match(/Opera Mini/i);
                    },
                    Windows: function () {
                        return navigator.userAgent.match(/IEMobile/i);
                    },
                    any: function () {
                        return (isMobile.Android() || isMobile.BlackBerry() || isMobile.iOS() || isMobile.Opera() || isMobile.Windows());
                    }
                };

                $("#mybutton").on("click", function () {

                    if ($("#txtName").val().length == 0 || $("#txtMobile").val().length == 0 || $("#txtAddress").val().length == 0) {
                        alert("Please Provide all Information");
                    }
                    else if ($("#txtName").val().length > 0 && $("#txtMobile").val().length > 0 && $("#txtAddress").val().length > 0) {

                        var List = "";
                        List += "Name:" + $("#txtName").val() + "\n\n";
                        List += "Mobile:" + $("#txtMobile").val() + "\n\n";
                        List += "Address:" + $("#txtAddress").val() + "\n\n";

                        for (var i = 0; i <= myObj.length - 1; i++) {
                            if ($("#Qty_" + i).val().length > 0) {
                                List += myObj[i].Name + "  " + $("#Price_" + i).text() + "  " + $("#Qty_" + i).val() + " " + $("#Total_" + i).text() + "\n\n";
                            }
                        }
                        List += "GrandTotal" + $("#GrandTotal").text();
                        if (isMobile.any()) {
                            var whatsappMessage = window.encodeURIComponent(List)
                            var whatsapp_url = "https://api.whatsapp.com/send?phone=917358862009&text=" + whatsappMessage;
                            window.location.href = whatsapp_url;
                        }
                        else {
                            alert("This option is only available on mobile devices.");
                        }

                    }


                });
            });


            function addproduct(ctrl) {
                var ctrlval = ctrl.id.split('_');
                var ctrlname = "#Qty_" + ctrlval[1];
                var ctrltotal = "#Total_" + ctrlval[1];
                var textvalue = $(ctrlname).val();
                if (textvalue == "") {
                    $(ctrlname).val("1");
                    calculateQuantity(ctrl);
                    GrandTotal();
                }
                else {
                    var textvalue1 = $(ctrlname).val();
                    $(ctrlname).val(++textvalue1);
                    calculateQuantity(ctrl);
                    GrandTotal();
                }

            }
            function minusproduct(ctrl) {
                var ctrlval = ctrl.id.split('_');
                var ctrlname = "#Qty_" + ctrlval[1];
                var textvalue = $(ctrlname).val();
                if (textvalue == "" || textvalue == 0) {
                    $(ctrlname).val("");
                }
                else {
                    var textvalue1 = $(ctrlname).val();
                    $(ctrlname).val(--textvalue1);
                    calculateQuantity(ctrl);
                    GrandTotal();
                }

            }

            function calculateQuantity(ctrl) {
                var ctrlval = ctrl.id.split('_');
                var ctrlQty = "#Qty_" + ctrlval[1];
                var ctrlprice = "#Price_" + ctrlval[1];
                var ctrltotal = "#Total_" + ctrlval[1];
                $(ctrltotal).text($(ctrlprice).text() * $(ctrlQty).val());
                $(ctrltotal).each(function () {
                    $(this).text(parseFloat($(this).text()).toFixed(2));
                });
            }

            function GrandTotal() {
                var total = 0;
                for (var i = 0; i <= myObj.length - 1; i++) {
                     if ($("#Total_" + i).text() != "") {
                        total = total + parseFloat($("#Total_" + i).text());
                        //alert(total) + "--i value "+ i;
                    }
                }
                $("#GrandTotal").text("");
                $("#GrandTotal").text(total);
                $("#GrandTotal").each(function () {
                    $(this).text(parseFloat($(this).text()).toFixed(2));
                });
            }


            function OrderNow() {
                var tot = parseFloat($("#GrandTotal").text());
                if (tot > 0) {
                    document.getElementById('id01').style.display = 'block';
                }
                else {
                    alert("Nothing To Order..");
                }
            }

            function BuildTable() {

                
                for (var i = 0; i <= myObj.length - 1; i++) {
                    var str = "<tr class='alt'><td>" + myObj[i].Name + "</td><td><div id='Price_" + i + "'>" + Number(myObj[i].Price).toFixed(2) + "</div></td><td>" +
                             "<span class='plus button' id='sp_" + i + "' onclick='addproduct(this);' >+</span>" +
                             "<input class='qtybox' type='text' name='qty' id='Qty_" + i + "' maxlength='2' readonly/>" +
                             "<span class='min button' id='ssp_" + i + "'  onclick='minusproduct(this);'>-</span>" +
                             "</td><td><div id='Total_" + i + "'></div></td></tr>'";
                    $('#maintable').append(str);
                }
            }

            //function PlaceOrder() {
            //    if ($("#txtName").val().length == 0 || $("#txtMobile").val().length == 0 || $("#txtAddress").val().length == 0) {
            //        alert("Please Provide all Information");
            //    }
            //    else {

            //        var List = "";
            //        List += "Name:" + $("#txtName").val() + "\n";
            //        List += "Mobile:" + $("#txtMobile").val() + "\n";
            //        List += "Address:" + $("#txtAddress").val() + "\n";

            //        for (var i = 0; i <= myObj.length - 1; i++) {
            //            if ($("#Qty_" + i).val().length > 0) {
            //                List += myObj[i].Name + "  " + $("#Price_" + i).text() + "  " + $("#Qty_" + i).val() + " " + $("#Total_" + i).text() + "\n";
            //            }
            //        }
            //        List += "GrandTotal" + $("#GrandTotal").text();
            //        sendmessage(List);

            //    }


            //}

            //function sendmessage(message) {
            //    alert(isMobile.any());
            //            if (isMobile.any()) {
            //                var whatsapp_url = "https://api.whatsapp.com/send?phone=917358862009&text=" + message;
            //                window.location.href = whatsapp_url;
            //            }
            //            else {
            //                alert("This option is only available on mobile devices.");
            //            }
            //}

    </script>
           <style>
.button {
 padding:5px; cursor:pointer; background:grey; color:white; width:25px; height:25px; text-align:center; display:inline-block;
}
        .qtybox{
            width:20px;
              padding: 0;
            padding-top: 5px;
  height: 20px;
  position: relative;
  left: 0;
  outline: none;
  border: 1px solid #cdcdcd;
  border-color: rgba(0, 0, 0, .15);
  background-color: white;
  font-size: 16px;
  text-align:center;
        }
.button:hover {
background:black;
}
 </style>
    </Head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">

<body>

<div class="w3-container w3-teal">
<h1>RMN Store <br/>Thanjavur</h1>
</div>
  <div class="w3-panel w3-pale-green w3-bottombar w3-border-green w3-border w3-auto">
    <p>Free Home Delivery 9.00 AM - 8.00 PM</p>
  </div>
    <img src="banner.jpg" />
<div class="w3-content">

<div class="w3-row w3-margin">
<div class="w3-twothird w3-container">
        <table id="maintable" class="w3-table w3-striped w3-bordered">
<thead><tr><th>Product</th><th>Price</th><th>count</th><th>Total</th></tr></thead>
<tbody>
</tbody>
</table>
</div>






</div>
</div>
 <button  onclick="OrderNow();" class="w3-button w3-black"  style="float:right;" >OrderNow</button>
    <div class="w3-container w3-teal">
        <div class="w3-row">
  <div class="w3-col s6  w3-center"><h2><p>Total:</p></h2></div>
  <div class="w3-col s6  w3-center"><h2><p id="GrandTotal">00.00</p></h2></div>
</div>
 
</div>
    <!-- The Modal -->
<div id="id01" class="w3-modal">
  <div class="w3-modal-content">
      <div class="w3-container">
      <span onclick="document.getElementById('id01').style.display='none'"
      class="w3-button w3-display-topright">&times;</span>
<label>Name</label>
<input id="txtName" class="w3-input" type="text">
<label>MobileNumber</label>
<input id="txtMobile" class="w3-input" type="text">
<label>Address</label>
<input id="txtAddress" class="w3-input" type="text">
<div>
    <div style="float:right;"><button id="mybutton"  class="w3-button w3-teal">Proceed</button></div>
</div>
                            

</div>
  </div>
</div>
</body>
</html>
